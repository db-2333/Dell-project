"use strict";function login_register(){$(".login_register").on("click",function(){$(".div_mark").toggle(),login_btn()}),$(".div_mark_dele").on("click",function(){$(".div_mark").toggle()})}var codeYes=!0;function tel_login(){if($(".div_mark .tel").val(""),$(".div_mark .pass").val(""),$(".block_slid").toggle(),$(".code").toggle(),$(".password").toggle(),$(".code_tishi").css("display","none"),$(".tel_tishi").css("display","none"),$(".password_tishi").css("display","none"),codeYes)return $(".order_login").html("手机验证码登录/注册"),$(".login_register_btn").html("登录"),void(codeYes=!1);$(".login_register_btn").html("登录/注册"),$(".order_login").html("账号密码登录"),codeYes=!0}function login_btn(){var o={code:!1,text:!1};slid_yz(o),$(".huoqu_code").on("click",function(){if(!o.code)return $(".code_tishi").css("display","block"),$(".code_tishi").html("请滑动验证"),void(o.tel||($(".tel_tishi").css("display","block"),$(".tel_tishi").html("请输入有效的电话号码")));$(".code_tishi").css("display","none"),$(".huoqu_code").html(numberTestCode(5))}),$(".div_mark .login_register_btn").on("click",function(){var t=$(".div_mark .tel").val();o.tel=/^1[3456789]\d{9}$/.test(t);var s=$(".div_mark .pass").val();if(o.password=/^[\d\w]{6,12}$/.test(s),s&&(o.code=!0,o.text=!0,!o.password))return $(".password_tishi").css("display","block"),void $(".password_tishi").html("密码为6~12为数字，字母组成");"注册"!=$(".div_mark .login_register_btn").html()?(o.tel?(o.password||($(".password_tishi").css("display","block"),$(".password_tishi").html("密码不能为空")),$(".tel_tishi").css("display","none")):($(".tel_tishi").css("display","block"),$(".tel_tishi").html("请输入有效的电话号码"),$(".password_tishi").css("display","block"),$(".password_tishi").html("请输入密码")),$(".div_mark .yanzheng_code").val()==$(".huoqu_code").html()&&(o.text=!0),o.code&&o.text?($(".code_tishi").css("display","none"),$.get({url:"../api/login.php",data:{tel:t,password:s},success:function(s){if(1==(s=JSON.parse(s)).code){document.cookie="login="+t+";path=/Dell_project;",localStorage.setItem("url",location.href.split("#")[0]);var i=localStorage.getItem("url");location.href=i,localStorage.removeItem("url")}else 0==s.code?($(".password_tishi").css("display","block"),$(".password_tishi").html(""+s.msg)):2==s.code&&($(".tel_tishi").css("display","block"),$(".tel_tishi").html(""+s.msg),$(".huoqu_code").html(numberTestCode(5)),o.text=!1)}})):o.code?o.text||($(".code_tishi").css("display","block"),$(".code_tishi").html("验证码错误"),$(".huoqu_code").html(numberTestCode(5))):($(".code_tishi").css("display","block"),$(".code_tishi").html("请输入验证码"))):regit(t,s,o)})}function regit(s,i,t){if(t.tel?$(".tel_tishi").css("display","none"):($(".tel_tishi").css("display","block"),$(".tel_tishi").html("请输入有效的电话号码")),!i)return $(".password_tishi").css("display","block"),void $(".password_tishi").html("密码不能为空");$(".password_tishi").css("display","none"),t.tel&&t.password?$.get({url:"../api/register.php",data:{tel:s,password:i},success:function(s){2==(s=JSON.parse(s)).code?($(".tel_tishi").css("display","block"),$(".tel_tishi").html(""+s.msg)):3==s.code&&$(".login_register_btn").html("登录")}}):(t.tel||($(".tel_tishi").css("display","block"),$(".tel_tishi").html("请输入有效的电话号码")),t.password||($(".password_tishi").css("display","block"),$(".password_tishi").html("密码为6~12为数字，字母组成")))}function numberTestCode(s){for(var i=[],t=0;t<s;t++){var o=parseInt(10*Math.random());i.push(o)}return i.join("")}function slid_yz(i){var t=void 0;$(".slid").on("mousedown",function(){$(document).on("mousemove",function(s){(t=s.clientX-parseInt($(".block").offset().left)-20)>=$(".block").width()-$(".slid").width()&&(t=$(".block").width()-$(".slid").width(),i.code=!0,$(".slid_text").html("验证成功")),t<=0&&(t=0),$(".slid").css({left:t}),$(".a_block").css({width:t}),t==$(".block").width()-$(".slid").width()&&($(document).off("mousemove"),$(".slid").off("mousedown"),$(document).off("mouseup"),$(".slid").css({backgroundPosition:"0  -82px",backgroundRepeat:"no-repeat"}))}),$(document).on("mouseup",function(){$(document).off("mousemove"),t<=$(".block").width()-$(".slid").width()&&(t=0),$(".slid").css({left:t}),$(".a_block").css({width:t})})})}$(".register_tel").on("click",function(){$(".tel_tishi").css("display","none"),$(".password_tishi").css("display","none"),codeYes&&tel_login(),$(".login_register_btn").html("注册")}),$(".order_login").on("click",tel_login);