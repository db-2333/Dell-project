"use strict";$(function(){var n=/id=(\d+)/;n.test(location.search)||(location.href="../index.html");var d=getCookie("login");if(d){$(".my_login").html(d);var t=getCookie("number");$(".badge").html(t),$(".login_register").on("mousedown",function(){$(".login_right").html('<h2 class="exit_login"><span>退出登录</span></h2>'),$(".login_right span").on("click",function(){localStorage.setItem("url",location.href.split("#")[0]);var n=localStorage.getItem("url");location.href=n,localStorage.removeItem("url"),document.cookie="login=login;expires="+new Date(0)+";path=/Dell_project;",document.cookie="number=number;expires="+new Date(0)+";path=/Dell_project;"})})}var l=n.exec(location.search)[1];function r(n){var t,s,i,o,e,a,c;$(".details_top").html('<div class="details_l">\n                                        <div class="details_pic">'+n.left+'</div>\n                                        <div class="goods_extend">\n                                            <a style="cursor:pointer"><img src="https://eshop.dell-brand.com/2015/icon_sc.jpg"> 收藏商品(<em>10</em>人气)</a>\n                                        </div>\n                                        <div class="magnifier"><img src="" alt=""></div>\n                                    </div>\n                                    <div class="details_message">\n                                        <h1>'+n.riht_title+"</h1>\n                                        <h2>"+n.xinhao+"</h2>\n                                        <h3>\n                                            "+n.xianshihaoli+"\n                                            <br> "+n.shaidan+'\n                                        </h3>\n                                        <div class="products_price">\n                                            <div class="p">\n                                                <div class="changshang"> '+n.chanshan+" </div> \n                                                "+(n.cs_price?'<em class="cs_em">￥'+n.cs_price+'</em>\n                                                <br>\n                                                <div class="zhekou">'+n.zhekou+"</div><em>￥</em><span>"+n.zk_price+'</span>\n                                                <br>\n                                                <div class="tehui"> '+n.tehui+' </div><em class="th_em">￥</em><span class="th_p">'+n.th_price+"</span>":'<em class="th_em">￥</em><span class="th_p">'+n.th_price+"</span>")+'\n                                            </div>\n                                            <p class="fenqi">【分期特惠】享花呗3期免息分期</p>\n                                        </div>\n                                        <p class="chunjietehui">\n                                            '+n.chunjietehui+'\n                                        </p>\n                                        <div class="products_div">\n                                            <span>配置</span>\n                                            <div class="products_div_text  peizhi">\n                                            '+n.peizhi+'\n                                            </div>\n                                        </div>\n                                        <p class="tishi">\n                                            *此处配置参数仅供参考，请以下单后您邮箱收到订单确认函为准。\n                                        </p>\n                                        <div class="products_div">\n                                            <span>赠品</span>\n                                            <div class="products_div_text zengpin1">\n                                                <span class="zengpin">\n                                                    <img src="https://eshop.dell-brand.com/../uploads/202004/15881398230_thumb.jpg" height="34">\n                                                    <span style=" display: contents;">'+n.zengpin+'</span>\n                                                </span>\n                                            </div>\n                                        </div>\n                                        <div class="products_div">\n                                            <span>服务</span>\n                                            <div class="products_div_text  service">\n                                            '+n.guanfengbiaopei+'\n                                            </div>\n                                        </div>\n                                        \x3c!-- 数量 --\x3e\n                                        <div class="products_div">\n                                            <span>数量</span>\n                                            <div class="products_div_text  number">\n                                                <div class="btn-group" role="group" style="margin-right: 5px;">\n                                                    <button type="button" class="btn btn-default input_reduce">-</button>\n                                                    <button type="button" class="btn btn-default input_num">'+n.goods_num+'</button>\n                                                    <button type="button" class="btn btn-default input_add">+</button>\n                                                </div>\n                                                <span style="display: contents;">库存 8 件已售出 91 件</span>\n                                            </div>\n                                        </div>\n                                        \x3c!-- 购买按钮和添加按钮 --\x3e\n                                        <div class="btn_buy_car">\n                                            <button type="button" class="btn btn-success buy_now">立即购买</button>\n                                            <button type="button" class="btn btn-primary add_car" >添加购物车</button>\n                                        </div>\n                                    </div>'),$(".details_bottom").html(n.chanpinxiangqing),t=n,$(".btn-group").on("mousedown",function(n){if(n.target.classList.contains("input_add")&&(t.goods_num++,r(t)),n.target.classList.contains("input_reduce")){if(--t.goods_num,t.goods_num<1)return alert("数量最少为1"),void(t.goods_num=1);r(t)}}),s=n,$(".buy_now").on("click",function(){if(!d)return $(".div_mark").toggle(),void login_btn();$.get({url:"../api/addgood.php",data:{tel:d,goods_id:l,goods_num:s.goods_num},success:function(n){(n=JSON.parse(n)).code&&(location.href="./shopCart.html")}})}),$(".add_car").on("click",function(){if(!d)return $(".div_mark").toggle(),void login_btn();$.get({url:"../api/addgood.php",data:{tel:d,goods_id:l,goods_num:s.goods_num},success:function(n){(n=JSON.parse(n)).code&&alert(n.msg)}})}),i=$(".details_top .details_pic .tb-booth  a  img"),o=$(".details_top .details_pic .tb-thumb   li "),e=$(".details_top .details_pic .tb-thumb   li img "),a=$(".jqzoom").parents("a"),c=$('<div class="mask"></div>'),a.append(c),a.css("display","block"),a.css("height","100%"),$(".jqzoom").css("height","100%"),o.on("click",function(){o.removeClass("tb-selected"),$(this).addClass("tb-selected");var n=e.eq($(this).index()).attr("src");i.attr("src",""+n),p(a)}),p(a)}function p(t){var n=$(".tb-selected img").prop("src");$(".magnifier img").prop("src",n);var e=$(".tb-booth .jqzoom").offset().left,a=$(".tb-booth .jqzoom").offset().top,c=parseInt($(".tb-booth").css("width")),d=parseInt($(".tb-booth").css("height")),l=parseInt($(".mask").css("width")),r=parseInt($(".mask").css("height"));t.on("mouseover",function(n){$(".mask").css({display:"block"}),$(".magnifier").css({display:"block"}),t.on("mousemove",function(n){var t=c/l,s=d/r,i=n.clientX-e-l/2,o=n.clientY-a-r/2;c-l<=i&&(i=c-l),i<=0&&(i=0),d-r<=o&&(o=d-r),o<=0&&(o=0),$(".mask").css({left:i,top:o}),$(".magnifier img").css({left:-t*i,top:-s*o})})}),t.on("mouseout",function(){$(".mask").css({display:"none"}),$(".magnifier").css({display:"none"})})}$.get({url:"../api/details.json",success:function(n){n.forEach(function(n,t){n.goods_id=t+1}),n.forEach(function(n){n.goods_num=1});var t=n.filter(function(n){return n.goods_id==l});r(t=t[0])}}),login_register();var s=!0;$(".area_btn").on("click",function(){s=s?($(this).css({background:"url(../images/area_btn.jpg) 104px 18px no-repeat"}),!1):($(this).css({background:"url(../images/area_btn.jpg) 104px -18px no-repeat"}),!0)});var i=!0;$(".fixde_div").on("click",function(){if(i)return $(".fixed_contact").css({right:-264}),void(i=!1);$(".fixed_contact").css({right:-5}),i=!0})});