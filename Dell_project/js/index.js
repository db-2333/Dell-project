"use strict";$(function(){var s=getCookie("login");if(s){$(".my_login").html(s);var i=getCookie("number");$(".badge").html(i),$(".login_register").on("mousedown",function(){$(".login_right").html('<h2 class="exit_login"><span>退出登录</span></h2>'),$(".login_right span").on("click",function(){localStorage.setItem("url",location.href.split("#")[0]);var s=localStorage.getItem("url");location.href=s,localStorage.removeItem("url"),removeCookie("login"),removeCookie("number")})})}new Swiper(".swiper-container",{autoplay:{delay:2e3,stopOnLastSlide:!1,disableOnInteraction:!0},loop:!0,pagination:{el:".swiper-pagination",clickable:!0}});var n=["./images/hot_products.png","./images/new_products.png","./images/game_products.png","./images/qingbao_products.png","./images/XPS_products.png","./images/peijian_products.png"],t=$(".products .container "),l=$('<div class="all_products "></div>');t.append(l);var o=$('<div class="produts_lists"></div>');$.get({url:"./api/data3.json",success:function(s){var t,e;e=t=" ",s.forEach(function(s,i){t+='\n                                    <div class="lists" idx="'+s.goods_id+'"  '+(32<=i?'style="height:290px;" ':"")+'>\n                                            <a class="lists_pic" idx="'+s.goods_id+'" href="./html/details_page.html?id='+s.goods_id+'" >\n                                                    <img src="'+s.big_image+'" alt="">\n                                                    '+(s.small_image?'<span class="small_pic"><img src="'+s.small_image+'" alt=""></span>':"")+'\n                                            </a>\n                                            <p class="lists_details">'+(s.details?s.details:"")+'</p>\n                                            <div class="lists_name">\n                                                    <p class="name">'+(s.name?s.name:"")+'</p>\n                                                    <p class="name1">'+(s.name1?s.name1:"")+'</p>\n                                            </div>\n                                            <p class="lists_title">'+(s.title?s.title:"")+'</p>\n                                            <div class="lists_price">\n                                                <div class="lists_price_left">\n                                                        '+(s.old_price?'<p class="old_price"><span>￥</span>'+s.old_price+"</p>":'<p class="old_price" style="height:20px;"></p>')+'\n                                                            <p class="now_price">\n                                                            <span>￥</span>'+s.now_price+'\n                                                            </p>\n                                                </div>\n                                                <a class="lists_price_btn" href="./html/details_page.html?id='+s.goods_id+'" >\n                                                    <button type="button" class="btn btn-primary list_btn">立即购买</button>\n                                                </a>\n                                            </div>\n                                    </div>\n                                    ',i%8==0&&(e+='<a href="#">\n                                                        <img src="'+n[i/8]+'" alt="">\n                                                    </a>'),e+=t,t=""}),o.html(e),l.append(o),$(".search_btn").on("click",function(){!function(s){var i=$(".text")[0].innerHTML,t=i.indexOf("B"),e=void 0,n=void 0;-1!=t?(e=i.substr(t+1).split("-")[0],(n=i.substr(t+1).split("-")[1])||(n=i.substr(t+1).split("-")[0],e=0)):"12000以上"==i&&(e=i.substr(0,5),n=1e10);var l=s.filter(function(s,i){return 1*s.now_price>=e&&1*s.now_price<=n}),o=$(".text")[1].innerHTML,a=o.indexOf("1"),c=void 0;-1!=a&&(c=o.substr(a,2));var d=s.filter(function(s,i){return-1!=s.name.indexOf(c)}),r=$(".text")[2].innerHTML,p=r.indexOf("i"),h=void 0;-1!=p&&(h=r.substr(p));var _=s.filter(function(s,i){if(s.title)return-1!=s.title.indexOf(h)}),g=[];l.length&&d.length&&_.length?l.forEach(function(t){d.forEach(function(i){_.forEach(function(s){t.goods_id==i.goods_id==s.goods_id&&g.push(s)})})}):l.length?d.length?_.length||l.forEach(function(i){d.forEach(function(s){i.goods_id==s.goods_id&&g.push(s)})}):l.forEach(function(i){_.forEach(function(s){i.goods_id==s.goods_id&&g.push(s)})}):d.forEach(function(i){_.forEach(function(s){i.goods_id==s.goods_id&&g.push(s)})});if(g.length)u(g);else{if(l.length)return u(l);if(d.length)return u(d);if(_.length)return u(_);u(s)}function u(s){var t=" ";s.forEach(function(s,i){t+='<div class="lists" idx="'+s.goods_id+'"  '+(32<=i?'style="height:290px;" ':"")+'>\n                                            <a class="lists_pic" idx="'+s.goods_id+'" href="./html/details_page.html?id='+s.goods_id+'" >\n                                                    <img src="'+s.big_image+'" alt="">\n                                                    '+(s.small_image?'<span class="small_pic"><img src="'+s.small_image+'" alt=""></span>':"")+'\n                                            </a>\n                                            <p class="lists_details">'+(s.details?s.details:"")+'</p>\n                                            <div class="lists_name">\n                                                    <p class="name">'+(s.name?s.name:"")+'</p>\n                                                    <p class="name1">'+(s.name1?s.name1:"")+'</p>\n                                            </div>\n                                            <p class="lists_title">'+(s.title?s.title:"")+'</p>\n                                            <div class="lists_price">\n                                                <div class="lists_price_left">\n                                                        '+(s.old_price?'<p class="old_price"><span>￥</span>'+s.old_price+"</p>":'<p class="old_price" style="height:20px;"></p>')+'\n                                                            <p class="now_price">\n                                                            <span>￥</span>'+s.now_price+'\n                                                            </p>\n                                                </div>\n                                                <a class="lists_price_btn" href="./html/details_page.html?id='+s.goods_id+'" >\n                                                    <button type="button" class="btn btn-primary list_btn">立即购买</button>\n                                                </a>\n                                            </div>\n                                    </div>\n                                    '});var i='<div style="background-color: #f5f5f5;">\n                                <div class="breadcrumb container" style="padding:8px 105px;font-size: 12px;">\n                                    <li><a href="" >首页</a></li>\n                                    <li><a href="#">搜索结果</a></li>\n                                </div>\n                            </div>\n                            <div class="container">共有'+s.length+'个产品</div>\n                            <div class="products">\n                                <div class="container">\n                                    <div class="all_products">\n                                        <div class="produts_lists">\n                                            '+t+"\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>";$(".main").html(i)}}(s)})}}),$(".configure_search .container div").on("click",function(){var i=$(this).children("ul");i.toggle();var t=i.children();t.on("click",function(){t.each(function(s,i){i.classList.remove("active")}),$(this).addClass("active");var s=$(this).html();$(i).parent().children().first().html(""+s)})}),$(".login_register").on("click",function(){var e,i,t;$(".div_mark").toggle(),i=e={code:!1,text:!1},t=void 0,$(".slid").on("mousedown",function(){$(document).on("mousemove",function(s){(t=s.clientX-parseInt($(".block").offset().left)-20)>=$(".block").width()-$(".slid").width()&&(t=$(".block").width()-$(".slid").width(),i.code=!0,$(".slid_text").html("验证成功")),t<=0&&(t=0),$(".slid").css({left:t}),$(".a_block").css({width:t}),t==$(".block").width()-$(".slid").width()&&($(document).off("mousemove"),$(".slid").off("mousedown"),$(document).off("mouseup"),$(".slid").css({backgroundPosition:"0  -82px",backgroundRepeat:"no-repeat"}))}),$(document).on("mouseup",function(s){$(document).off("mousemove"),t<=$(".block").width()-$(".slid").width()&&(t=0),$(".slid").css({left:t}),$(".a_block").css({width:t})})}),$(".huoqu_code").on("click",function(){if(!e.code)return $(".code_tishi").css("display","block"),$(".code_tishi").html("请滑动验证"),void(e.tel||($(".tel_tishi").css("display","block"),$(".tel_tishi").html("请输入有效的电话号码")));$(".code_tishi").css("display","none"),$(".huoqu_code").html(c(5))}),$(".div_mark .login_register_btn").on("click",function(){var t=$(".div_mark .tel").val();e.tel=/^1[3456789]\d{9}$/.test(t);var s=$(".div_mark .pass").val();if(e.password=/^[\d\w]{6,12}$/.test(s),s&&(e.code=!0,e.text=!0,e.password||($(".password_tishi").css("display","block"),$(".password_tishi").html("密码为6~12为数字，字母组成"))),"注册"!=$(".div_mark .login_register_btn").html()){e.tel?(e.password||($(".password_tishi").css("display","block"),$(".password_tishi").html("请输入密码")),$(".tel_tishi").css("display","none")):($(".tel_tishi").css("display","block"),$(".tel_tishi").html("请输入有效的电话号码"),$(".password_tishi").css("display","block"),$(".password_tishi").html("请输入密码"));var i=$(".div_mark .yanzheng_code").val();if(i==$(".huoqu_code").html()&&(e.text=!0),e.code&&e.text)$(".code_tishi").css("display","none"),$.get({url:"./api/login.php",data:{tel:t,password:s},success:function(s){if(1==(s=JSON.parse(s)).code){document.cookie="login="+t+";path=/Dell_project;",localStorage.setItem("url",location.href.split("#")[0]);var i=localStorage.getItem("url");location.href=i,localStorage.removeItem("url")}else 0==s.code?($(".password_tishi").css("display","block"),$(".password_tishi").html(""+s.msg)):2==s.code&&($(".tel_tishi").css("display","block"),$(".tel_tishi").html(""+s.msg),$(".huoqu_code").html(c(5)),e.text=!1)}});else{if(!e.code)return $(".code_tishi").css("display","block"),void $(".code_tishi").html("请输入验证码");if(!e.text)return $(".code_tishi").css("display","block"),$(".code_tishi").html("验证码错误"),void $(".huoqu_code").html(c(5))}}else!function(s,i,t){if(t.tel?$(".tel_tishi").css("display","none"):($(".tel_tishi").css("display","block"),$(".tel_tishi").html("请输入有效的电话号码")),!i)return $(".password_tishi").css("display","block"),$(".password_tishi").html("密码不能为空");$(".password_tishi").css("display","none"),t.tel&&t.password?$.get({url:"./api/register.php",data:{tel:s,password:i},success:function(s){2==(s=JSON.parse(s)).code?($(".tel_tishi").css("display","block"),$(".tel_tishi").html(""+s.msg)):3==s.code&&($(".login_register_btn").html("登录"),$(".tel_tishi").css("display","none"))}}):(t.tel||($(".tel_tishi").css("display","block"),$(".tel_tishi").html("请输入有效的电话号码")),t.password||($(".password_tishi").css("display","block"),$(".password_tishi").html("密码为6~12为数字，字母组成")))}(t,s,e)})}),$(".div_mark_dele").on("click",function(){$(".div_mark").toggle()});var e=!0;function a(){if($(".div_mark .tel").val(""),$(".div_mark .pass").val(""),$(".block_slid").toggle(),$(".code").toggle(),$(".password").toggle(),$(".code_tishi").css("display","none"),$(".tel_tishi").css("display","none"),$(".password_tishi").css("display","none"),e)return $(".order_login").html("手机验证码登录/注册"),$(".login_register_btn").html("登录"),void(e=!1);$(".login_register_btn").html("登录/注册"),$(".order_login").html("账号密码登录"),e=!0}function c(s){for(var i=[],t=0;t<s;t++){var e=parseInt(10*Math.random());i.push(e)}return i.join("")}$(".register_tel").on("click",function(){$(".tel_tishi").css("display","none"),$(".password_tishi").css("display","none"),e&&a(),$(".login_register_btn").html("注册")}),$(".order_login").on("click",a);var d=!0;$(".area_btn").on("click",function(){d=d?($(this).css({background:"url(./images/area_btn.jpg) 104px 18px no-repeat"}),!1):($(this).css({background:"url(./images/area_btn.jpg) 104px -18px no-repeat"}),!0)});var r=!0;$(".fixde_div").on("click",function(){if(r)return $(".fixed_contact").css({right:-264}),void(r=!1);$(".fixed_contact").css({right:-5}),r=!0})});